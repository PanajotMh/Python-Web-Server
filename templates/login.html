<h1>Login</h1>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flash-messages">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<form method="post" action="{{ url_for('login') }}">
  <label for="username">Username:</label>
  <input type="text" id="username" name="username" required>
  <br>
  <label for="password">Password:</label>
  <input type="password" id="password" name="password" required>
  <br>
  <input type="submit" value="Login">


  <head>
    <script src="https://www.google.com/recaptcha/enterprise.js?render=6LcundsnAAAAAKJc31Ec5qDzFNQXHkFor8Eig_CF"></script>
    ...
    </head>
    
    <script>
    function onClick(e) {
      e.preventDefault();
      grecaptcha.enterprise.ready(async () => {
        const token = await grecaptcha.enterprise.execute('6LcundsnAAAAAKJc31Ec5qDzFNQXHkFor8Eig_CF', {action: 'LOGIN'});
        // IMPORTANT: The 'token' that results from execute is an encrypted response sent by
        // reCAPTCHA Enterprise to the end user's browser.
        // This token must be validated by creating an assessment.
        // See https://cloud.google.com/recaptcha-enterprise/docs/create-assessment
      });
    }
    </script>

    <div class="g-recaptcha" data-sitekey="{{ recaptcha.site_key }}"></div><br>
    <input type="submit" value="Submit">

</form>
